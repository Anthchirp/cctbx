# Script for building CCTBX on linux and macOS
#
# Variables:
#   PYTHON_VERSION: py27, py36

steps:

- checkout: self
  path: ./modules/cctbx_project

- script: |
    cd ../..
    ln -s modules/cctbx_project/libtbx/auto_build/bootstrap.py
  displayName: Link bootstrap.py

- script: |
    source $(Build.StagingDirectory)/miniconda/etc/profile.d/conda.sh
    conda activate $(PYTHON_VERSION)
    cd ../..
    python bootstrap.py hot update --builder=cctbx
  displayName: Download sources
